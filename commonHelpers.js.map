{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst BASE_URL = new URL('https://pixabay.com/api/');\nconst KEY = '41516646-ec27055f09ddd37d9bfda39a5';\n\nconst formSearch = document.querySelector('.form');\nconst listGallery = document.querySelector('.gallery');\nconst span = document.querySelector('span');\n\nformSearch.addEventListener('submit', event => {\n    event.preventDefault();\n    listGallery.classList.add('visibility');\n    span.classList.remove('visibility');\n\n    const resultsSearch = event.target.elements.search.value;\n\n    const searchParams = new URLSearchParams({\n        key: KEY,\n        q: resultsSearch,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n    });\n\n    const url = `${BASE_URL}?${searchParams}`;\n\n    fetch(url)\n        .then(response => {\n            if (!response.ok) {\n                throw new Error(response.status);\n            }\n            return response.json();\n        })\n\n        .then(result => {\n            formMarkupCreating(result);\n        })\n        .catch(error => {\n            span.classList.add('visibility');\n\n            iziToast.error({\n                message: `❌ ${error}`,\n\n                icon: '',\n                position: 'topRight',\n            });\n        });\n});\n\nfunction formMarkupCreating(result) {\n    const dataFormImage = result.hits;\n    if (!dataFormImage.length) {\n        iziToast.error({\n            message: `❌ Sorry, there are no images matching your search query. Please, try again!`,\n            icon: '',\n            position: 'topRight',\n        });\n    }\n    const gallery = new SimpleLightbox('.gallery a', {\n        captionsData: 'alt',\n        captionDelay: 250,\n        captionPosition: 'bottom',\n    });\n    const galleryMarkup = dataFormImage.reduce(\n        (\n            html,\n            {\n                webformatURL,\n                largeImageURL,\n                tags,\n                likes,\n                views,\n                comments,\n                downloads,\n            }\n        ) =>\n            html +\n            `<li class=\"gallery-item\">\n    <a class=\"gallery-link\" href=\"${largeImageURL}\">\n        <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\"/>\n    </a>\n    <ul class=\"characteristics-list\">\n    <li class=\"characteristics\"><span class=\"characteristics-titel\">Likes</span> <span>${likes}</span></li>\n    <li class=\"characteristics\"><span class=\"characteristics-titel\">Views</span> <span>${views}</span></li>\n    <li class=\"characteristics\"><span class=\"characteristics-titel\">Comments</span> <span>${comments}</span></li>\n    <li class=\"characteristics\"><span class=\"characteristics-titel\">Downloads</span> <span>${downloads}</span></li>\n</ul>\n    \n</li>`,\n        ''\n    );\n\n    listGallery.innerHTML = galleryMarkup;\n\n    gallery.refresh();\n\n    span.classList.add('visibility');\n    listGallery.classList.remove('visibility');\n}\n"],"names":["BASE_URL","KEY","formSearch","listGallery","span","event","resultsSearch","searchParams","url","response","result","formMarkupCreating","error","iziToast","dataFormImage","gallery","SimpleLightbox","galleryMarkup","html","webformatURL","largeImageURL","tags","likes","views","comments","downloads"],"mappings":"6vBAKA,MAAMA,EAAW,IAAI,IAAI,0BAA0B,EAC7CC,EAAM,qCAENC,EAAa,SAAS,cAAc,OAAO,EAC3CC,EAAc,SAAS,cAAc,UAAU,EAC/CC,EAAO,SAAS,cAAc,MAAM,EAE1CF,EAAW,iBAAiB,SAAUG,GAAS,CAC3CA,EAAM,eAAc,EACpBF,EAAY,UAAU,IAAI,YAAY,EACtCC,EAAK,UAAU,OAAO,YAAY,EAElC,MAAME,EAAgBD,EAAM,OAAO,SAAS,OAAO,MAE7CE,EAAe,IAAI,gBAAgB,CACrC,IAAKN,EACL,EAAGK,EACH,WAAY,QACZ,YAAa,aACb,WAAY,MACpB,CAAK,EAEKE,EAAM,GAAGR,KAAYO,IAE3B,MAAMC,CAAG,EACJ,KAAKC,GAAY,CACd,GAAI,CAACA,EAAS,GACV,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEnC,OAAOA,EAAS,MAC5B,CAAS,EAEA,KAAKC,GAAU,CACZC,EAAmBD,CAAM,CACrC,CAAS,EACA,MAAME,GAAS,CACZR,EAAK,UAAU,IAAI,YAAY,EAE/BS,EAAS,MAAM,CACX,QAAS,KAAKD,IAEd,KAAM,GACN,SAAU,UAC1B,CAAa,CACb,CAAS,CACT,CAAC,EAED,SAASD,EAAmBD,EAAQ,CAChC,MAAMI,EAAgBJ,EAAO,KACxBI,EAAc,QACfD,EAAS,MAAM,CACX,QAAS,8EACT,KAAM,GACN,SAAU,UACtB,CAAS,EAEL,MAAME,EAAU,IAAIC,EAAe,aAAc,CAC7C,aAAc,MACd,aAAc,IACd,gBAAiB,QACzB,CAAK,EACKC,EAAgBH,EAAc,OAChC,CACII,EACA,CACI,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACH,IAEDP,EACA;AAAA,oCACwBE;AAAA,0CACMD,WAAsBE;AAAA;AAAA;AAAA,yFAGyBC;AAAA,yFACAC;AAAA,4FACGC;AAAA,6FACCC;AAAA;AAAA;AAAA,OAIrF,EACR,EAEItB,EAAY,UAAYc,EAExBF,EAAQ,QAAO,EAEfX,EAAK,UAAU,IAAI,YAAY,EAC/BD,EAAY,UAAU,OAAO,YAAY,CAC7C"}